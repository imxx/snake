define(["calculations","settings"],function(t,e){function s(t){this.cells=[t],this.next=null,this.prev=null,this.lastXStep=0,this.lastYStep=0}return s.prototype.addToTheEnd=function(t){this.cells.push(t)},s.prototype.removeFirst=function(){return this.cells.shift()},s.prototype.empty=function(){return!this.cells.length},s.prototype.first=function(){return this.cells[0]},s.prototype.last=function(){return this.cells[this.cells.length-1]},s.prototype.forEach=function(t){var e,s=this.cells,n=s.length;for(e=0;n>e;e++)t(s[e],e)},s.prototype.move=function(){var s,n,l=this.cells,p=e.cellRadius,i=l.length;for(s=0;i>s;s++)0===s?(xStep=l[s].xStep,yStep=l[s].yStep,l[s].x+=xStep,l[s].y+=yStep):t.getDistance(l[s-1],l[s])>2*p&&(n=t.getMovingSteps(l[s-1],l[s],2*p),xStep=n.x,yStep=n.y,l[s].x=l[s-1].x+xStep,l[s].y=l[s-1].y+yStep);this.lastXStep=xStep,this.lastYStep=yStep},s});